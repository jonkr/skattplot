
class TableRow:

    COL_IDX_TYPE = 0
    COL_IDX_LOWER_BOUND = 2
    COL_IDX_UPPER_BOUND = 3
    COL_IDX_TAX = 4

    def __init__(self, raw_row):
        vals = [v.strip() for v in raw_row.split()]
        assert len(vals) == 5
        self.type = vals[self.COL_IDX_TYPE]
        self.lower_bound = int(vals[self.COL_IDX_LOWER_BOUND])
        self.upper_bound = int(vals[self.COL_IDX_UPPER_BOUND])
        self.tax = vals[self.COL_IDX_TAX]

    def get_tax(self, gross_salary):
        if self.type.endswith(r'%'):
            return round(float(self.tax)/100 * gross_salary, 2)
        else:
            return int(self.tax)

    def __repr__(self):
        return '<Type: {}, Lower: {}, Upper: {}, Tax: {}'.format(
            self.type[-1], self.lower_bound, self.upper_bound, self.tax)


class ATax:

    def __init__(self):
        self.table = self._read_tax_table()

    def _read_tax_table(self):
        def get_table_row():
            for line in tax_table_30.split('\n'):
                if line == '':
                    continue
                yield TableRow(line)

        return [l for l in get_table_row()]

    def get(self, gross_salary):
        if gross_salary == 0:
            return 0
        gross_salary = round(gross_salary, 0)
        assert gross_salary >= self.table[0].lower_bound
        assert gross_salary <= self.table[-1].upper_bound
        for row in self.table:
            if row.lower_bound <= gross_salary <= row.upper_bound:
                return row.get_tax(gross_salary)

    def lower_bounds(self):
        return [
            row.lower_bound
            for row in self.table
        ]


tax_table_30 = """
30B	30	1	1600	0
30B	30	1601	1700	117
30B	30	1701	1800	127
30B	30	1801	1900	138
30B	30	1901	2000	148
30B	30	2001	2100	159
30B	30	2101	2200	161
30B	30	2201	2300	171
30B	30	2301	2400	182
30B	30	2401	2500	192
30B	30	2501	2600	203
30B	30	2601	2700	213
30B	30	2701	2800	224
30B	30	2801	2900	226
30B	30	2901	3000	236
30B	30	3001	3100	247
30B	30	3101	3200	257
30B	30	3201	3300	268
30B	30	3301	3400	278
30B	30	3401	3500	280
30B	30	3501	3600	291
30B	30	3601	3700	301
30B	30	3701	3800	312
30B	30	3801	3900	322
30B	30	3901	4000	333
30B	30	4001	4100	334
30B	30	4101	4200	344
30B	30	4201	4300	354
30B	30	4301	4400	365
30B	30	4401	4500	374
30B	30	4501	4600	385
30B	30	4601	4700	386
30B	30	4701	4800	396
30B	30	4801	4900	407
30B	30	4901	5000	416
30B	30	5001	5100	427
30B	30	5101	5200	437
30B	30	5201	5300	447
30B	30	5301	5400	448
30B	30	5401	5500	457
30B	30	5501	5600	467
30B	30	5601	5700	476
30B	30	5701	5800	494
30B	30	5801	5900	514
30B	30	5901	6000	534
30B	30	6001	6100	554
30B	30	6101	6200	575
30B	30	6201	6300	595
30B	30	6301	6400	615
30B	30	6401	6500	635
30B	30	6501	6600	655
30B	30	6601	6700	675
30B	30	6701	6800	695
30B	30	6801	6900	716
30B	30	6901	7000	736
30B	30	7001	7100	756
30B	30	7101	7200	776
30B	30	7201	7300	796
30B	30	7301	7400	816
30B	30	7401	7500	836
30B	30	7501	7600	857
30B	30	7601	7700	877
30B	30	7701	7800	897
30B	30	7801	7900	917
30B	30	7901	8000	937
30B	30	8001	8100	957
30B	30	8101	8200	977
30B	30	8201	8300	998
30B	30	8301	8400	1018
30B	30	8401	8500	1038
30B	30	8501	8600	1058
30B	30	8601	8700	1078
30B	30	8701	8800	1098
30B	30	8801	8900	1119
30B	30	8901	9000	1139
30B	30	9001	9100	1159
30B	30	9101	9200	1179
30B	30	9201	9300	1199
30B	30	9301	9400	1219
30B	30	9401	9500	1239
30B	30	9501	9600	1260
30B	30	9601	9700	1280
30B	30	9701	9800	1300
30B	30	9801	9900	1320
30B	30	9901	10000	1340
30B	30	10001	10100	1360
30B	30	10101	10200	1380
30B	30	10201	10300	1401
30B	30	10301	10400	1421
30B	30	10401	10500	1441
30B	30	10501	10600	1461
30B	30	10601	10700	1481
30B	30	10701	10800	1501
30B	30	10801	10900	1522
30B	30	10901	11000	1542
30B	30	11001	11100	1563
30B	30	11101	11200	1583
30B	30	11201	11300	1603
30B	30	11301	11400	1624
30B	30	11401	11500	1644
30B	30	11501	11600	1665
30B	30	11601	11700	1685
30B	30	11701	11800	1706
30B	30	11801	11900	1726
30B	30	11901	12000	1746
30B	30	12001	12100	1767
30B	30	12101	12200	1787
30B	30	12201	12300	1808
30B	30	12301	12400	1828
30B	30	12401	12500	1849
30B	30	12501	12600	1869
30B	30	12601	12700	1890
30B	30	12701	12800	1911
30B	30	12801	12900	1934
30B	30	12901	13000	1961
30B	30	13001	13100	1988
30B	30	13101	13200	2015
30B	30	13201	13300	2041
30B	30	13301	13400	2068
30B	30	13401	13500	2095
30B	30	13501	13600	2121
30B	30	13601	13700	2148
30B	30	13701	13800	2175
30B	30	13801	13900	2201
30B	30	13901	14000	2228
30B	30	14001	14100	2253
30B	30	14101	14200	2279
30B	30	14201	14300	2305
30B	30	14301	14400	2330
30B	30	14401	14500	2356
30B	30	14501	14600	2381
30B	30	14601	14700	2407
30B	30	14701	14800	2433
30B	30	14801	14900	2458
30B	30	14901	15000	2484
30B	30	15001	15100	2509
30B	30	15101	15200	2535
30B	30	15201	15300	2561
30B	30	15301	15400	2586
30B	30	15401	15500	2612
30B	30	15501	15600	2637
30B	30	15601	15700	2663
30B	30	15701	15800	2689
30B	30	15801	15900	2714
30B	30	15901	16000	2740
30B	30	16001	16100	2765
30B	30	16101	16200	2791
30B	30	16201	16300	2817
30B	30	16301	16400	2842
30B	30	16401	16500	2868
30B	30	16501	16600	2893
30B	30	16601	16700	2919
30B	30	16701	16800	2945
30B	30	16801	16900	2970
30B	30	16901	17000	2996
30B	30	17001	17100	3021
30B	30	17101	17200	3047
30B	30	17201	17300	3073
30B	30	17301	17400	3098
30B	30	17401	17500	3124
30B	30	17501	17600	3149
30B	30	17601	17700	3175
30B	30	17701	17800	3201
30B	30	17801	17900	3226
30B	30	17901	18000	3252
30B	30	18001	18100	3277
30B	30	18101	18200	3303
30B	30	18201	18300	3329
30B	30	18301	18400	3354
30B	30	18401	18500	3380
30B	30	18501	18600	3405
30B	30	18601	18700	3431
30B	30	18701	18800	3457
30B	30	18801	18900	3482
30B	30	18901	19000	3508
30B	30	19001	19100	3533
30B	30	19101	19200	3559
30B	30	19201	19300	3585
30B	30	19301	19400	3610
30B	30	19401	19500	3636
30B	30	19501	19600	3661
30B	30	19601	19700	3687
30B	30	19701	19800	3713
30B	30	19801	19900	3738
30B	30	19901	20000	3764
30B	30	20001	20200	3815
30B	30	20201	20400	3866
30B	30	20401	20600	3917
30B	30	20601	20800	3969
30B	30	20801	21000	4020
30B	30	21001	21200	4071
30B	30	21201	21400	4122
30B	30	21401	21600	4173
30B	30	21601	21800	4225
30B	30	21801	22000	4276
30B	30	22001	22200	4328
30B	30	22201	22400	4381
30B	30	22401	22600	4434
30B	30	22601	22800	4487
30B	30	22801	23000	4539
30B	30	23001	23200	4592
30B	30	23201	23400	4645
30B	30	23401	23600	4698
30B	30	23601	23800	4751
30B	30	23801	24000	4804
30B	30	24001	24200	4856
30B	30	24201	24400	4909
30B	30	24401	24600	4962
30B	30	24601	24800	5015
30B	30	24801	25000	5068
30B	30	25001	25200	5121
30B	30	25201	25400	5174
30B	30	25401	25600	5226
30B	30	25601	25800	5279
30B	30	25801	26000	5332
30B	30	26001	26200	5385
30B	30	26201	26400	5438
30B	30	26401	26600	5491
30B	30	26601	26800	5543
30B	30	26801	27000	5596
30B	30	27001	27200	5649
30B	30	27201	27400	5702
30B	30	27401	27600	5755
30B	30	27601	27800	5808
30B	30	27801	28000	5861
30B	30	28001	28200	5913
30B	30	28201	28400	5966
30B	30	28401	28600	6019
30B	30	28601	28800	6072
30B	30	28801	29000	6125
30B	30	29001	29200	6178
30B	30	29201	29400	6231
30B	30	29401	29600	6283
30B	30	29601	29800	6336
30B	30	29801	30000	6389
30B	30	30001	30200	6442
30B	30	30201	30400	6495
30B	30	30401	30600	6548
30B	30	30601	30800	6600
30B	30	30801	31000	6653
30B	30	31001	31200	6706
30B	30	31201	31400	6759
30B	30	31401	31600	6811
30B	30	31601	31800	6864
30B	30	31801	32000	6917
30B	30	32001	32200	6974
30B	30	32201	32400	7034
30B	30	32401	32600	7094
30B	30	32601	32800	7154
30B	30	32801	33000	7214
30B	30	33001	33200	7274
30B	30	33201	33400	7334
30B	30	33401	33600	7394
30B	30	33601	33800	7454
30B	30	33801	34000	7514
30B	30	34001	34200	7574
30B	30	34201	34400	7634
30B	30	34401	34600	7694
30B	30	34601	34800	7754
30B	30	34801	35000	7814
30B	30	35001	35200	7874
30B	30	35201	35400	7934
30B	30	35401	35600	7994
30B	30	35601	35800	8054
30B	30	35801	36000	8114
30B	30	36001	36200	8174
30B	30	36201	36400	8234
30B	30	36401	36600	8294
30B	30	36601	36800	8354
30B	30	36801	37000	8414
30B	30	37001	37200	8474
30B	30	37201	37400	8534
30B	30	37401	37600	8594
30B	30	37601	37800	8654
30B	30	37801	38000	8714
30B	30	38001	38200	8774
30B	30	38201	38400	8834
30B	30	38401	38600	8894
30B	30	38601	38800	8954
30B	30	38801	39000	9014
30B	30	39001	39200	9074
30B	30	39201	39400	9134
30B	30	39401	39600	9194
30B	30	39601	39800	9254
30B	30	39801	40000	9314
30B	30	40001	40200	9374
30B	30	40201	40400	9434
30B	30	40401	40600	9494
30B	30	40601	40800	9554
30B	30	40801	41000	9614
30B	30	41001	41200	9674
30B	30	41201	41400	9734
30B	30	41401	41600	9794
30B	30	41601	41800	9854
30B	30	41801	42000	9914
30B	30	42001	42200	9974
30B	30	42201	42400	10034
30B	30	42401	42600	10094
30B	30	42601	42800	10154
30B	30	42801	43000	10214
30B	30	43001	43200	10274
30B	30	43201	43400	10334
30B	30	43401	43600	10394
30B	30	43601	43800	10454
30B	30	43801	44000	10514
30B	30	44001	44200	10574
30B	30	44201	44400	10634
30B	30	44401	44600	10694
30B	30	44601	44800	10761
30B	30	44801	45000	10861
30B	30	45001	45200	10961
30B	30	45201	45400	11061
30B	30	45401	45600	11161
30B	30	45601	45800	11261
30B	30	45801	46000	11361
30B	30	46001	46200	11461
30B	30	46201	46400	11561
30B	30	46401	46600	11661
30B	30	46601	46800	11761
30B	30	46801	47000	11861
30B	30	47001	47200	11961
30B	30	47201	47400	12061
30B	30	47401	47600	12161
30B	30	47601	47800	12261
30B	30	47801	48000	12361
30B	30	48001	48200	12461
30B	30	48201	48400	12561
30B	30	48401	48600	12661
30B	30	48601	48800	12761
30B	30	48801	49000	12861
30B	30	49001	49200	12961
30B	30	49201	49400	13061
30B	30	49401	49600	13161
30B	30	49601	49800	13261
30B	30	49801	50000	13361
30B	30	50001	50200	13461
30B	30	50201	50400	13561
30B	30	50401	50600	13661
30B	30	50601	50800	13761
30B	30	50801	51000	13861
30B	30	51001	51200	13961
30B	30	51201	51400	14061
30B	30	51401	51600	14161
30B	30	51601	51800	14261
30B	30	51801	52000	14361
30B	30	52001	52200	14461
30B	30	52201	52400	14561
30B	30	52401	52600	14661
30B	30	52601	52800	14761
30B	30	52801	53000	14861
30B	30	53001	53200	14961
30B	30	53201	53400	15061
30B	30	53401	53600	15161
30B	30	53601	53800	15264
30B	30	53801	54000	15370
30B	30	54001	54200	15476
30B	30	54201	54400	15582
30B	30	54401	54600	15688
30B	30	54601	54800	15794
30B	30	54801	55000	15900
30B	30	55001	55200	16006
30B	30	55201	55400	16112
30B	30	55401	55600	16218
30B	30	55601	55800	16324
30B	30	55801	56000	16430
30B	30	56001	56200	16536
30B	30	56201	56400	16642
30B	30	56401	56600	16748
30B	30	56601	56800	16854
30B	30	56801	57000	16960
30B	30	57001	57200	17066
30B	30	57201	57400	17172
30B	30	57401	57600	17278
30B	30	57601	57800	17384
30B	30	57801	58000	17490
30B	30	58001	58200	17596
30B	30	58201	58400	17702
30B	30	58401	58600	17808
30B	30	58601	58800	17914
30B	30	58801	59000	18020
30B	30	59001	59200	18126
30B	30	59201	59400	18232
30B	30	59401	59600	18338
30B	30	59601	59800	18444
30B	30	59801	60000	18550
30B	30	60001	60200	18656
30B	30	60201	60400	18762
30B	30	60401	60600	18868
30B	30	60601	60800	18974
30B	30	60801	61000	19080
30B	30	61001	61200	19186
30B	30	61201	61400	19292
30B	30	61401	61600	19398
30B	30	61601	61800	19504
30B	30	61801	62000	19610
30B	30	62001	62200	19716
30B	30	62201	62400	19822
30B	30	62401	62600	19928
30B	30	62601	62800	20034
30B	30	62801	63000	20140
30B	30	63001	63200	20246
30B	30	63201	63400	20352
30B	30	63401	63600	20458
30B	30	63601	63800	20564
30B	30	63801	64000	20670
30B	30	64001	64200	20776
30B	30	64201	64400	20882
30B	30	64401	64600	20988
30B	30	64601	64800	21094
30B	30	64801	65000	21200
30B	30	65001	65200	21306
30B	30	65201	65400	21412
30B	30	65401	65600	21518
30B	30	65601	65800	21624
30B	30	65801	66000	21730
30B	30	66001	66200	21836
30B	30	66201	66400	21942
30B	30	66401	66600	22048
30B	30	66601	66800	22154
30B	30	66801	67000	22260
30B	30	67001	67200	22366
30B	30	67201	67400	22472
30B	30	67401	67600	22578
30B	30	67601	67800	22684
30B	30	67801	68000	22790
30B	30	68001	68200	22896
30B	30	68201	68400	23002
30B	30	68401	68600	23108
30B	30	68601	68800	23214
30B	30	68801	69000	23320
30B	30	69001	69200	23426
30B	30	69201	69400	23532
30B	30	69401	69600	23638
30B	30	69601	69800	23744
30B	30	69801	70000	23850
30B	30	70001	70200	23956
30B	30	70201	70400	24062
30B	30	70401	70600	24168
30B	30	70601	70800	24274
30B	30	70801	71000	24380
30B	30	71001	71200	24486
30B	30	71201	71400	24592
30B	30	71401	71600	24698
30B	30	71601	71800	24804
30B	30	71801	72000	24910
30B	30	72001	72200	25016
30B	30	72201	72400	25122
30B	30	72401	72600	25228
30B	30	72601	72800	25334
30B	30	72801	73000	25440
30B	30	73001	73200	25546
30B	30	73201	73400	25652
30B	30	73401	73600	25758
30B	30	73601	73800	25864
30B	30	73801	74000	25970
30B	30	74001	74200	26076
30B	30	74201	74400	26182
30B	30	74401	74600	26288
30B	30	74601	74800	26394
30B	30	74801	75000	26500
30B	30	75001	75200	26606
30B	30	75201	75400	26712
30B	30	75401	75600	26818
30B	30	75601	75800	26924
30B	30	75801	76000	27030
30B	30	76001	76200	27136
30B	30	76201	76400	27242
30B	30	76401	76600	27348
30B	30	76601	76800	27454
30B	30	76801	77000	27560
30B	30	77001	77200	27666
30B	30	77201	77400	27772
30B	30	77401	77600	27878
30B	30	77601	77800	27984
30B	30	77801	78000	28090
30B	30	78001	78200	28196
30B	30	78201	78400	28302
30B	30	78401	78600	28408
30B	30	78601	78800	28514
30B	30	78801	79000	28620
30B	30	79001	79200	28726
30B	30	79201	79400	28832
30B	30	79401	79600	28938
30B	30	79601	79800	29044
30B	30	79801	80000	29150
30%	30	80001	80200	36
30%	30	80201	81000	37
30%	30	81001	81400	37
30%	30	81401	85000	37
30%	30	85001	85400	37
30%	30	85401	86800	38
30%	30	86801	88600	38
30%	30	88601	89400	38
30%	30	89401	91200	38
30%	30	91201	92800	39
30%	30	92801	94400	39
30%	30	94401	95800	39
30%	30	95801	98000	39
30%	30	98001	99800	40
30%	30	99801	105800	40
30%	30	105801	106600	41
30%	30	106601	107800	41
30%	30	107801	109600	41
30%	30	109601	112800	41
30%	30	112801	115200	41
30%	30	115201	117200	42
30%	30	117201	120400	42
30%	30	120401	120600	42
30%	30	120601	124200	42
30%	30	124201	126000	42
30%	30	126001	128600	43
30%	30	128601	129600	43
30%	30	129601	138200	43
30%	30	138201	143200	43
30%	30	143201	162200	44
30%	30	162201	169400	44
30%	30	169401	196000	45
30%	30	196001	207000	45
30%	30	207001	248000	46
30%	30	248001	266200	46
30%	30	266201	337200	47
30%	30	337201	372600	47
30%	30	372601	527000	48
30%	30	527001	621000	48
30%	30	621001	1203400	49
30%	30	1203401	1863400	49
30%	30	1863401	3000000	50"""
